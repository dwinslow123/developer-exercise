<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                    "http://www.w3.org/TR/html4/loose.dtd">
  <html>
    <head>
      <title>List App</title>
      <script src="http://code.jquery.com/jquery-latest.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
      <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
      <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
      <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    </head>
    <body>
      <div id="quotes"></div>
        <script type="text/babel">

          class App extends React.Component {
            state = {
              quotesList: [],
              currentPage: 1,
              quotesPerPage: 15,
              theme: '',
            }

            getQuotes = (e) => {
              fetch('https://gist.githubusercontent.com/anonymous/8f61a8733ed7fa41c4ea/raw/1e90fd2741bb6310582e3822f59927eb535f6c73/quotes.json')
                .then((response) => {
                  return response.json();
                })
                .then(quotesList => {
                  this.setState({
                    quotesList: quotesList,
                  });
                })
                .catch(err => {
                  return err;
                })
              }

            handlePageClick = (e) => {
              this.setState({
                currentPage: Number(e.target.id),
              });
            }

            handleThemeClick = (e) => {
              this.setState({
                theme: e.target.value,
              });
            }

            componentDidMount() {
              this.getQuotes();
            };

            render() {
              const { quotesList, currentPage, quotesPerPage, theme } = this.state;
              const indexOfLastQuote = currentPage * quotesPerPage;
              const indexOfFirstQuote = indexOfLastQuote - quotesPerPage;
              const movieQuotes = quotesList.filter(quote => quote.theme === 'movies');
              const gameQuotes = quotesList.filter(quote => quote.theme === 'games');
              const currentQuotes = this.state.theme === '' ? quotesList.slice(indexOfFirstQuote, indexOfLastQuote) : this.state.theme === 'movies' ? movieQuotes.slice(indexOfFirstQuote, indexOfLastQuote) : gameQuotes.slice(indexOfFirstQuote, indexOfLastQuote);

              const renderQuotes = currentQuotes.map((quote, i) => {
                return (
                  <div key={ i }>
                    <ul>
                      <li>Quote: "{ quote.quote }"</li>
                      <li>Context: { quote.context }</li>
                      <li>Source: { quote.source }</li>
                      <li>Theme: { quote.theme }</li>
                    </ul>
                  </div>
                )
              });

              const pageNumbers = [];
                for (let i = 0; i <= Math.ceil(quotesList.length / quotesPerPage); i++) {
                  pageNumbers.push(i);
                }

              const renderPageNumbers = pageNumbers.map(number => {
                return (
                  <button
                    key={ number }
                    id={ number }
                    onClick={ this.handlePageClick }
                  >
                    { number }
                  </button>
                );
              });

              return (
                <div>
                  { renderQuotes }
                  <ul id="page-numbers">{ renderPageNumbers }</ul>
                    <input type="button" value="movies" onClick={ this.handleThemeClick } />
                    <input type="button" value="games" onClick={ this.handleThemeClick } />
                    { console.log(this.state.theme) }
                </div>
              )
            }
        }

    ReactDOM.render (
        <App />,
      document.getElementById('quotes')
    );
      </script>
    </body>
  </html>
